# CLAUDE.md 追記スニペット

以下を既存のCLAUDE.mdに追記してください。

---

## プロジェクト個別の CLAUDE.md に追記

```markdown
## Context Compression Layer

### 初回読み込み（自動）

このプロジェクトで最初のタスクに取りかかる前に、以下を読んでください:

1. `_ai-context/context/project_summary.md` - プロジェクト全体像
2. `_ai-context/context/current_focus.md` - 現在のフォーカス

current_focus.md の末尾「更新」日付が3日以上前の場合、1回だけ聞いてください:
「前回から何か進展や変更はありましたか？（なければそのまま作業に入ります）」
回答があれば current_focus.md に反映してから作業開始。なければそのまま開始。

### AI行動規範（自律的に従うこと）

以下はスキルの明示的な呼び出しを必要としません。AIが自然な判断で実行してください。

#### 意思決定の検出と記録

- 会話中にアーキテクチャや技術選定に関わる決定が出たら、1行で提案する:
  「💡 Decision Logに記録しますか？ → {決定の要約}」
- 承認されたら `_ai-context/context/decision_log/YYYY-MM-DD_topic.md` をTEMPLATEに従い作成
- 1セッション最大3回まで。断られたらそれ以上勧めない

#### セッション終了の検知と記録

- 作業の区切り（「ありがとう」「ここまで」等）を検知したら、AI作業分を current_focus.md に追記提案する
- 既存の内容は触らない。AIが追記する行には [AI] をつける
- 3-5行以内で簡潔に。短い質問応答だけの場合は提案不要

#### プロジェクト知見の保存と検索

- 作業中に再利用価値のある知見（デバッグ結果、環境設定、設計理由等）を発見したら、`_ai-context/context/memories/` への保存を提案する
- 関連しそうな既存の知見があれば、自分から検索して参照する
- 「覚えておいて」「メモリに保存して」等の明示的な指示があった場合は、確認を挟まず即座に保存する
```

---

## ワークスペース全体の CLAUDE.md に追記（任意）

```markdown
## Context Compression Layer

プロジェクト横断の作業時は `.context/active_projects.md` を確認してください。
各プロジェクト内の指示は、各プロジェクトの CLAUDE.md に記載されています。
```
